<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Solitary Confinement &middot; PapaScott
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/ps.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed/index.xml">

</head>


  <body class="theme-base-08" >

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><a href="/">PapaScott</a> is a personal weblog by Scott Hanson.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about.html">About</a>
        
      
    
      
    
      
    
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/search.html">Search</a>
        
      
    
      
        
      
    
    
<div class="sidebar-nav-item">Archives: 

<a href="/archives/2015/">2015</a>
<a href="/archives/2014/">2014</a>
<a href="/archives/2013/">2013</a>
<a href="/archives/2012/">2012</a>
<a href="/archives/2011/">2011</a>
<a href="/archives/2010/">2010</a>
<a href="/archives/2009/">2009</a>
<a href="/archives/2008/">2008</a>
<a href="/archives/2007/">2007</a>
<a href="/archives/2006/">2006</a>
<a href="/archives/2005/">2005</a>
<a href="/archives/2004/">2004</a>
<a href="/archives/2003/">2003</a>
<a href="/archives/2002/">2002</a>
<a href="/archives/2001/">2001</a>
<a href="/archives/2000/">2000</a>
<a href="/archives/1999/">1999</a>

</div>
    <a class="sidebar-nav-item" href="http://www.mcdonalds-nordheide.de/">McDonald's Nordheide-Harburg</a>


    
</nav>
  <div class="sidebar-item">
  <p>
  	Powered by <a href="http://jekyllrb.com/">jekyll</a>, styled by <a href="http://lanyon.getpoole.com/">lanyon</a>, served by <a href="https://pages.github.com/">GitHub</a>
  </p>
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">PapaScott</a>
            <small>And you know what they said? Well, some of it was true!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        

        <div class="post">
  <h1 class="post-title">Solitary Confinement</h1>
  <span class="post-date">22 Jul 2004</span>
  <p>The past few days I've been setting up some small scale FreeBSD jails. Setting up a full scale jail is <a href="http://www.freebsd.org/cgi/man.cgi?query=jail&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+4.10-stable&amp;format=html">well documented</a>, just run make install into some directory, and there are some <a href="http://memberwebs.com/nielsen/freebsd/jails/">nice tools to manage jails</a> once they are running. However, a full make install weighs in at over 100 MB. Even <a href="http://memberwebs.com/nielsen/freebsd/jails/docs/jail_remove.html">deleting some files</a> leaves 80 MB. That seemed to me to be too heavy... I want each jail to run just one service: a squid, an apache, a postfix, a mysql. I couldn't find anything on setting up a "thin" jail, other than the advice to "delete what you don't need".</p>
<p>However, I did find <a href="http://neon1.net/misc/minibsd.html">MiniBSD</a>, a standalone system designed to fit on a Compact Flash card. By building it, then deleting the files not needed for a jail, I ended up with 15 MB. I needed to add some things back (pam libraries, pkg tools), but then I had a tight system with sshd and the ability to install packages. To set up a new jail, I can unjust unpack my tar, set up an alias interface, and start it up. For squid or postfix I just need two packages. Apache requires a few more.</p>
<p>My goal is to have all my network services running in its own jail, 3 or 4 jails per PC, each jail with a redundant setup on another machine. When a system goes down, I can use <a href="http://www.boutell.com/rinetd/">rinetd</a> to bounce the original IPs into the backup jail... no playing with firewalls or DNS tables to get back going. The host machines have no ports other than ssh open... only the jails are visible to the outside world. You may break one of my services, even gain root with it, but you're still behind bars.</p>

</div>
<div>
  
    <span class="post-date">
    Previous Post: <a href="/archives/2004/07/22/google-circa-1960/">Google circa 1960</a></span>
  
  
    <span class="post-date">
    Next Post: <a href="/archives/2004/07/24/biting-the-hand-that-feeds-you/">Biting the hand that feeds you</a></span>
  
</div>
<div class="related">
  <h2>Recent Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/archives/2015/04/30/see-what-sticks/">
            See What Sticks
            <small>30 Apr 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/archives/2015/04/23/transition/">
            Transition
            <small>23 Apr 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/archives/2015/04/20/confirmation/">
            Confirmation
            <small>20 Apr 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
if(location.hostname.match('papascott')){
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'papascott'; // required: replace example with your forum shortname
  var disqus_identifier = "/archives/2004/07/22/solitary-confinement/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  }
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
