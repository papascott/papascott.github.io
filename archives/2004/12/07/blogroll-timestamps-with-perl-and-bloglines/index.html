<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blogroll Timestamps with Perl and Bloglines &middot; PapaScott
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/ps.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed/index.xml">

</head>


  <body class="theme-base-08" >

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><a href="/">PapaScott</a> is a personal weblog by Scott Hanson.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about.html">About</a>
        
      
    
      
    
      
    
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/search.html">Search</a>
        
      
    
      
        
      
    
    
<div class="sidebar-nav-item">Archives: 

<a href="/archives/2015/">2015</a>
<a href="/archives/2014/">2014</a>
<a href="/archives/2013/">2013</a>
<a href="/archives/2012/">2012</a>
<a href="/archives/2011/">2011</a>
<a href="/archives/2010/">2010</a>
<a href="/archives/2009/">2009</a>
<a href="/archives/2008/">2008</a>
<a href="/archives/2007/">2007</a>
<a href="/archives/2006/">2006</a>
<a href="/archives/2005/">2005</a>
<a href="/archives/2004/">2004</a>
<a href="/archives/2003/">2003</a>
<a href="/archives/2002/">2002</a>
<a href="/archives/2001/">2001</a>
<a href="/archives/2000/">2000</a>
<a href="/archives/1999/">1999</a>

</div>
    <a class="sidebar-nav-item" href="http://www.mcdonalds-nordheide.de/">McDonald's Nordheide-Harburg</a>


    
</nav>
  <div class="sidebar-item">
  <p>
  	Powered by <a href="http://jekyllrb.com/">jekyll</a>, styled by <a href="http://lanyon.getpoole.com/">lanyon</a>, served by <a href="https://pages.github.com/">GitHub</a>
  </p>
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">PapaScott</a>
            <small>And you know what they said? Well, some of it was true!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        

        <div class="post">
  <h1 class="post-title">Blogroll Timestamps with Perl and Bloglines</h1>
  <span class="post-date">07 Dec 2004</span>
  <p>A few weeks ago I mentioned that I was retrieving my <a href="http://www.papascott.de/archives/2004/10/23/bloglines-timestamps/" title="PapaScott: Bloglines Timestamps">blogroll with timestamps from Bloglines</a> using their <a href="http://www.bloglines.com/services/api/">web services API</a>, but that both my scripts and their API were still buggy. Both are now mostly fixed, I can now get timestamps for 99.5% of my blogroll with the API. The necessary files are at my <a href="http://cvs.sourceforge.net/viewcvs.py/papascott/bloglines/" title="SourceForge.net CVS Repository - directory - cvs: papascott/bloglines">personal CVS repository</a>: a database schema (<a href="http://cvs.sourceforge.net/viewcvs.py/papascott/bloglines/schema.sql?rev=1.1&amp;view=markup">schema.sql</a>), three Perl scripts that read the blogroll into the database (<a href="http://cvs.sourceforge.net/viewcvs.py/papascott/bloglines/bl.getblogroll.pl?rev=1.1.1.1&amp;view=markup">bl.getblogroll.pl</a>), read the timestamps into the database (<a href="http://cvs.sourceforge.net/viewcvs.py/papascott/bloglines/bl.read.pl?rev=1.2&amp;view=auto">bl.read.pl</a>), and write an <a href="http://www.papascott.de/bl.rss">RSS file</a> from the database (<a href="http://cvs.sourceforge.net/viewcvs.py/papascott/bloglines/bl.write.pl?rev=1.1.1.1&amp;view=auto">bl.write.pl</a>), and finally a PHP script using MagpieRSS that reads the RSS file (<a href="http://cvs.sourceforge.net/viewcvs.py/papascott/bloglines/blogroll-simple.php?rev=1.1&amp;view=auto">blogroll-simple.php</a>). </p>
<p>These scripts are not specific to any weblog software. The Perl scripts require the modules <a href="http://search.cpan.org/~miyagawa/WebService-Bloglines/">WebService::Bloglines</a>, XML::Parser and LWP, among others. I run the Perl scripts every 15 minutes with cron (saving the results of bl.write.pl to a file), and include() the PHP script on my home page. That's all the documentation I'm going to give for now, but if you can understand it, feel free to play with the scripts and send me your improvements.<br />
<!--more--><br />
Well, maybe a few notes are in order.</p>
<p>1. The Bloglines API gets all feeds whether they are marked as public or not. I put my private feeds into separate folders which are ignored by the notifier. My script then only gets those feeds which are in folders that are not ignored.</p>
<p>2. The database field link_alias will override the weblog title in the RSS output, if present. </p>
<p>3. The WebService::Bloglines method getitems() will die if the HTTP status is not 200. However, it is perfectly valid for a feed to return a status of 304 (i.e. no newer entries are available). Therefore I check the status of each feed with LWP first.</p>
<p>4. Similarly, getitems() will also die if the input is not valid XML. This is the 0.5% when the script does not work (namely, for Aaron Swartz... his RSS is valid, but Bloglines appears to have truncated a field for his feed). So a blog is simply skipped if the XML is not valid.</p>

</div>
<div>
  
    <span class="post-date">
    Previous Post: <a href="/archives/2004/12/06/dog-blogging/">Dog Blogging</a></span>
  
  
    <span class="post-date">
    Next Post: <a href="/archives/2004/12/08/the-end/">The End</a></span>
  
</div>
<div class="related">
  <h2>Recent Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/archives/2015/04/23/transition/">
            Transition
            <small>23 Apr 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/archives/2015/04/20/confirmation/">
            Confirmation
            <small>20 Apr 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/archives/2015/02/10/how-i-punked-facebook/">
            How I Punked Facebook
            <small>10 Feb 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
if(location.hostname.match('papascott')){
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'papascott'; // required: replace example with your forum shortname
  var disqus_identifier = "/archives/2004/12/07/blogroll-timestamps-with-perl-and-bloglines/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  }
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
