<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      BackupPC &middot; PapaScott
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/ps.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed/index.xml">

  

</head>


  <body class="theme-base-08" >

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><a href="/">PapaScott</a> is a personal weblog by Scott Hanson.</p>
  </div>
<!-- Jquery loads content of sidebar div, see default.html -->
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">PapaScott</a>
            <small>I don't claim to succeed at all this</small>
          </h3>
        </div>
      </div>

      <div class="container content">


        <div class="post">
  <h1 class="post-title">BackupPC</h1>
  <span class="post-date">14 Nov 2003</span>
  <p>The past couple of weeks I've been evaluating <a title="BackupPC: Open Source Backup to disk" href="http://backuppc.sourceforge.net/">BackupPC</a>, an open source backup to hard disk program. It uses standard client programs like rsync and tar or can read Windows smb shares, so there is nothing to install on the clients. It has a nice web interface (mod perl) for administering full and incremental backups and for retrieving restored files (either save to client or retrieve as tar or zip archive via http), Best of all, it has a intelligent pool system so that identical files from various clients are stored only once. So if you have several dozen identical workstations, your disk space requirement for the backup is the size of a single workstation, or less if you turn on compression.</p>
<p>We want to use it for something different, which is why it's taken me so long to get it going. We want to take nightly backups of our development servers, specifically the working directories of our developers with their CVS playgrounds. The servers are under load literally both day (development) and night (daily builds). A typical partition is 20 GB with 1.5 million files, with lots of duplicates . Our tape drives are maxxed out, so we'd like to put the daily backups on disk and archive to tape just once a week.</p>
<p>My problem was not setting up BackupPC itself, but setting up the clients. My test machines all had good performance, but under real conditions rsync was simply too slow, taking 20 hours for a full and 12 hours for an incremental, putting load on both server and client. The testing process was somewhat tedious, since I had to wait overnight each time for results. But I've finally found settings that work... using tar over ssh (rsh is not an option) reniced in a wrapper script on the backup client to -19. The full backups still take 20 hours (that's OK, we'll do full backups on weekends), but the incrementals are done in 3 hours. Bingo. Now we can get everything done overnight.</p>
<p>We'll try things our for a few more days, but it looks like we'll be able to put this system into production.</p>

</div>
<div>
  
    <span class="post-date">
    Previous Post: <a href="/archives/2003/11/13/roadster/">Roadster</a></span>
  
  
    <span class="post-date">
    Next Post: <a href="/archives/2003/11/15/bath-grin/">Bath Grin</a></span>
  
</div>
<div class="related" id="related">
<!-- Jquery loads content of related div, see default.html -->
</div>

        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
if(location.hostname.match('papascott')){
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'papascott'; // required: replace example with your forum shortname
  var disqus_identifier = "/archives/2003/11/14/backuppc/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  }
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.4/zepto.min.js"></script>
    
    <script>
      $( "#sidebar" ).load( "/includes/sidebar.html" );
      $( "#related" ).load( "/includes/related.html" );
      
    </script>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
