<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      How To Cook Quick Links, Bork Bork Bork! &middot; PapaScott
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/ps.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed/index.xml">

</head>


  <body class="theme-base-08" >

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><a href="/">PapaScott</a> is a personal weblog by Scott Hanson.</p>
  </div>
<!-- Jquery loads content of sidebar div, see default.html -->
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">PapaScott</a>
            <small>And you know what they said? Well, some of it was true!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        

        <div class="post">
  <h1 class="post-title">How To Cook Quick Links, Bork Bork Bork!</h1>
  <span class="post-date">10 May 2003</span>
  <p>Danger, danger, this post contains PHP code! Also note I've changed my mind a bit and put the quick links below any main posts for the day, rather than above.</p>
<p>Note that the qlinks are saved in a separate blog. I'm not sure if that's the best idea or not... I could have defined a category for quick links. But it's difficult to define different entry formats for categories using MT tags. I find using a separate blog easier, then including the files with quick links in the index of the main blog, so the main blog always has the newest quick links without rebuilding. However, using a separate blog makes finding the links for each day somewhat complicated.  </p>
<p>Each day can be found in /YYYY/MM/DD/qlinks.inc. I could just include this file in the MTDateFooter for each main post... EXCEPT that I would then miss the quick links for the days where I had no main post. So in the MTDateHeader, I need to check all the dates between the current and the previous post.</p>
<p>At the top of the index template (before the MTEntries tag at any rate) we need to define some variables to make it easier to calculate dates:</p>
<pre>&lt;?php 
$offset=0;
define(DAY,60*60*24);
define(NOW,time());
?&gt;</pre>
<p>Since NOW is defined in seconds, we have count back DAYs in seconds as well. The $offset keeps track of which days we've already checked. </p>
<p>The meat of the script is in the MTDateHeader, where we check each day before the date of the current entry for quicklinks, before we output anything for the current day. For each day, we print a header and include the quick links only if a quick links file exists for that day.</p>
<pre>&lt;MTDateHeader&gt;
&lt;?php
  $mt_date='&lt;$MTEntryDate format="%d %B %Y"$&gt;';
  $ql_date=date('d F Y',NOW-$offset*DAY);
  while ($ql_date&lt;&gt;$mt_date) {
    $inc_file=date('./Y/m/d/',NOW-$offset*DAY)
      .'qlinks.inc';
    if (is_readable($inc_file)) {
      echo '&lt;h2&gt;',$ql_date,'&lt;/h2&gt;';
      @include($inc_file);
    }
    $offset++;
    $ql_date=date('d F Y',NOW-$offset*DAY);
  }
?&gt;
&lt;h2&gt;&lt;$MTEntryDate format="%d %B %Y"$&gt;&lt;/h2&gt;
&lt;/MTDateHeader&gt;</pre>
<p>Then we do all our normal entry stuff. After that, we need an MTDateFooter for the current day's quick links.</p>
<pre>&lt;MTDateFooter&gt;
&lt;?php 
@include('&lt;$MTEntryDate format="./%Y/%m/%d/qlinks.inc"$&gt;');
$offset++;
?&gt;</pre>
<p>The @ before 'include' means there will be no warning message if the file does not exist. </p>
<p>I'm not particularly happy that I have up to 15 separate includes on my index page. A cleaner solution would be to put all the quick links into an RSS file, and loop through that. I'll do that in version 0.02.</p>
<p>Or I may even put the quick links back on the sidebar. Nothing in life is permanent.</p>

</div>
<div>
  
    <span class="post-date">
    Previous Post: <a href="/archives/2003/05/09/im-sick-of-finding-my-own-blog-when-researching-a-topic-ive-ranted-about/">I'm SICK of finding my OWN BLOG when researching a topic I've ranted about</a></span>
  
  
    <span class="post-date">
    Next Post: <a href="/archives/2003/05/10/zempt/">Zempt</a></span>
  
</div>
<div class="related" id="related">
<!-- Jquery loads content of related div, see default.html -->
</div>

        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
if(location.hostname.match('papascott')){
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'papascott'; // required: replace example with your forum shortname
  var disqus_identifier = "/archives/2003/05/10/how-to-cook-quick-links-bork-bork-bork/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  }
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.4/zepto.min.js"></script>
    <script>
      $( "#sidebar" ).load( "/includes/sidebar.html" );
      $( "#related" ).load( "/includes/related.html" );
    </script>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
