<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      MT, Time Zones, DST, and RSS &middot; PapaScott
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.9.0/css/lightbox.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="/public/css/ps.css">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed/index.xml">

  

</head>


  <body class="theme-base-08" >

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><a href="/">PapaScott</a> is a personal weblog by Scott Hanson.</p>
  </div>
<!-- Jquery loads content of sidebar div, see default.html -->
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">PapaScott</a>
            <small>I like big blogs and I cannot lie! üêò</small>
          </h3>
        </div>
      </div>

      <div class="container content">


        <div class="post">
  <h1 class="post-title">MT, Time Zones, DST, and RSS</h1>
  <span class="post-date">17 May 2003</span>
  <p>I'm planning to archive my quick links as RSS files and use the Magpie or Onyx PHP libraries to add them to my montly archives. While preparing the files, I was reminded that Movable Type has no concept of daylight savings time. The date and time of the entry is saved in local time, without any indication of time zone or daylight savings time. </p>
<p>You can set a time zone for a blog, but it's just a number between -12 and 12, and is a global preference. It seems only to set the MTBlogTimezone variable, which gets tacked onto the dc:date field in the RSS template. If you go onto daylight savings time, the dc:dates will be off by an hour until you adjust your timezone. And in the fall you have to set it back.</p>
<p>This may not really make any difference when generating web pages, when I want to display local time anyway, but it does make a difference to me when I archive entries to RSS files. There I'd just as soon save the dc:time as UTC, which never springs ahead or falls back. Then when I display the file, I can convert to whatever time zone I want.</p>
<p>So I installed <a title="Brad Choate: PerlScript Plugin" href="http://www.bradchoate.com/past/mtperlscript.php">Brad Choate's PerlScript Plugin</a>. Then I can use a couple of lines of perl to convert MT date and time to UTC and print it out as a ISO 8601 string fit for the dc:date field. I could probably make this into a plugin for MT as well. But this is a lot more trouble than it needs to be. MT should be able to keep track of time zones and daylight saving time on its own. </p>
<p><code>&lt;dc:date&gt;&lt;MTPerlScript&gt;<br />
use Time::Local;<br />
my $mytime = timelocal(&lt;$MTEntryDate format=<br />
   "('%S', '%M', '%H', '%e', '%m'-1,  '%Y'-1900)"$&gt;);<br />
my ($sec,$min,$hour,$mday,$mon,$year,<br />
   $wday,$yday,$isdst)=gmtime($mytime);<br />
printf('%d-%02d-%02dT%02d:%02d:%02dZ',<br />
   $year+1900,$mon+1,$mday,$hour,$min,$sec);<br />
&lt;/MTPerlScript&gt;&lt;/dc:date&gt;</code></p>

</div>
<div>
  
    <span class="post-date">
    Previous Post: <a href="/archives/2003/05/16/petition-for-celtic-v-st-pauli-benefit-match/">Petition for Celtic v St. Pauli benefit match</a></span>
  
  
    <span class="post-date">
    Next Post: <a href="/archives/2003/05/17/texas-democratic-legislator-playing-cards/">Texas Democratic Legislator Playing Cards</a></span>
  
</div>
<div class="related" id="related">
<!-- Jquery loads content of related div, see default.html -->
</div>

        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
if(location.hostname.match('papascott')){
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'papascott'; // required: replace example with your forum shortname
  var disqus_identifier = "/archives/2003/05/17/mt-time-zones-dst-and-rss/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  }
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.4/zepto.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.9.0/js/lightbox-plus-jquery.js"></script>
    
    <script>
      $( "#sidebar" ).load( "/includes/sidebar.html" );
      $( "#related" ).load( "/includes/related.html" );
      
    </script>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
